<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Laudos App</title>
  <link rel="stylesheet" href="css/style.css" />
</head>
<body>
  <div class="app-container">
    <header class="app-header">
      <h1>Laudos App</h1>
      <div class="header-actions">
        <button id="btn-new" class="btn-primary" aria-label="Criar novo laudo">Novo Laudo</button>
        <button id="btn-list" class="btn-secondary" aria-label="Ver lista de laudos">Lista de Laudos</button>
      </div>
    </header>

    <main class="app-main">
      <!-- Tela de Listagem -->
      <div id="list-view" class="view-container">
        <h2>Laudos Cadastrados</h2>
        <div id="laudos-list" class="laudos-list">
          <!-- Laudos serão carregados aqui -->
        </div>
      </div>

      <!-- Tela de Formulário Completo -->
    <div id="form-view" class="view-container" style="display: none;">
  <h2>Laudo Médico Pericial</h2>
  
  <div class="tab-nav">
    <button class="tab-link active" onclick="openTab(event, 'tab-processo')">Processo</button>
    <button class="tab-link" onclick="openTab(event, 'tab-paciente')">Reclamante</button>
    <button class="tab-link" onclick="openTab(event, 'tab-anamnese')">Anamnese</button>
    <button class="tab-link" onclick="openTab(event, 'tab-conclusao')">Discussão/Conclusão</button>
    <button class="tab-link" onclick="openTab(event, 'tab-finalizacao')">Finalização</button>
  </div>

  <form id="laudo-form">
    <div id="tab-processo" class="tab-content active">
      <fieldset>
        <legend>Dados do Processo</legend>
        <div class="form-grid">
          <div class="form-group">
            <label for="numero_processo">Número do Processo:</label>
            <input type="text" id="numero_processo" name="numero_processo" required />
          </div>
          <div class="form-group">
            <label for="vara_trabalho">Vara do Trabalho:</label>
            <input type="text" id="vara_trabalho" name="vara_trabalho" placeholder="Ex: 3ª Vara do Trabalho"/>
          </div>
          <div class="form-group full-width">
            <label for="cidade">Cidade da Vara:</label>
            <input type="text" id="cidade" name="cidade" placeholder="Ex: Porto Alegre - RS"/>
          </div>
           <div class="form-group">
            <label for="reclamante">Reclamante:</label>
            <input type="text" id="reclamante" name="reclamante" required />
          </div>
          <div class="form-group">
            <label for="reclamada">Reclamada:</label>
            <input type="text" id="reclamada" name="reclamada" />
          </div>
        </div>
      </fieldset>
    </div>

    <div id="tab-paciente" class="tab-content">
      <fieldset>
        <legend>Dados Pessoais</legend>
        <div class="form-grid">
          <div class="form-group">
            <label for="data_nascimento">Data de Nascimento:</label>
            <input type="date" id="data_nascimento" name="data_nascimento" />
          </div>
          <div class="form-group">
            <label for="idade">Idade:</label>
            <input type="text" id="idade" name="idade" readonly />
          </div>
          <div class="form-group">
            <label for="cpf">CPF:</label>
            <input type="text" id="cpf" name="cpf" placeholder="000.000.000-00" />
          </div>
          <div class="form-group">
            <label for="naturalidade">Naturalidade:</label>
            <input type="text" id="naturalidade" name="naturalidade" placeholder="Ex: Cachoeirinha/RS"/>
          </div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Dados Laborais na Reclamada</legend>
         <div class="form-grid">
          <div class="form-group">
            <label for="funcao_reclamante">Função na Reclamada:</label>
            <input type="text" id="funcao_reclamante" name="funcao_reclamante" />
          </div>
           <div class="form-group"></div>
          <div class="form-group">
            <label for="data_admissao">Data de Admissão:</label>
            <input type="date" id="data_admissao" name="data_admissao" />
          </div>
          <div class="form-group">
            <label for="data_demissao">Data de Demissão:</label>
            <input type="date" id="data_demissao" name="data_demissao" />
          </div>
        </div>
      </fieldset>
       <fieldset>
          <legend>Exame Físico</legend>
          <div class="form-grid">
              <div class="form-group">
                  <label for="altura">Altura (m):</label>
                  <input type="number" step="0.01" id="altura" name="altura" placeholder="ex: 1.75"/>
              </div>
              <div class="form-group">
                  <label for="peso">Peso (kg):</label>
                  <input type="number" step="0.1" id="peso" name="peso" placeholder="ex: 70.5"/>
              </div>
               <div class="form-group">
                  <label for="imc">IMC (kg/m²):</label>
                  <input type="text" id="imc" name="imc" readonly />
              </div>
             <div class="form-group full-width">
                <label>Fotos:</label>
                <button type="button" id="btn-add-photo" class="btn-secondary">Adicionar Fotos</button>
                <div id="photos-preview-container" class="photos-preview">
                  </div>
              </div>

              <div class="form-group full-width">
                  <label for="exame_fisico_geral">Exame Físico (Otoscopia, Oroscopia, etc.):</label>
                  <textarea id="exame_fisico_geral" name="exame_fisico_geral" rows="4"></textarea>
              </div>

              <div class="form-group full-width">
                  <label for="exame_fisico_geral">Exame Físico (Otoscopia, Oroscopia, etc.):</label>
                  <textarea id="exame_fisico_geral" name="exame_fisico_geral" rows="4"></textarea>
              </div>
          </div>
      </fieldset>
    </div>
    
    <div id="tab-anamnese" class="tab-content">
       <fieldset>
        <legend>Anamnese e Histórico</legend>
        <div class="form-grid">
          <div class="form-group full-width">
            <label for="queixa_principal">Queixa Principal:</label>
            <textarea id="queixa_principal" name="queixa_principal" rows="3"></textarea>
          </div>
          <div class="form-group full-width">
              <label for="historia_molestia">História Pregressa da Moléstia:</label>
              <textarea id="historia_molestia" name="historia_molestia" rows="8"></textarea>
          </div>
          <div class="form-group full-width">
            <label for="passado_laboral">Passado Laboral (CTPS):</label>
            <textarea id="passado_laboral" name="passado_laboral" rows="6"></textarea>
          </div>
        </div>
      </fieldset>
    </div>

    <div id="tab-conclusao" class="tab-content">
      <fieldset>
        <legend>Análise Técnica</legend>
        <div class="form-grid">
            <div class="form-group full-width">
                <label for="exames_complementares">Exames Complementares:</label>
                <textarea id="exames_complementares" name="exames_complementares" rows="5"></textarea>
            </div>
            <div class="form-group full-width">
                <label for="discussao">Considerações Médicas / Discussão:</label>
                <textarea id="discussao" name="discussao" rows="8"></textarea>
            </div>
            <div class="form-group full-width">
                <label for="conclusao">Conclusão:</label>
                <textarea id="conclusao" name="conclusao" rows="5"></textarea>
            </div>
        </div>
      </fieldset>
      <fieldset>
        <legend>Respostas aos Quesitos</legend>
        
        <div class="quesitos-group">
          <h4>Quesitos do Juízo</h4>
          <div id="quesitos-juizo-list" class="quesitos-list">
            </div>
          <button type="button" id="btn-add-quesito-juizo" class="btn-secondary btn-add-quesito">Adicionar Pergunta</button>
        </div>

        <div class="quesitos-group">
          <h4>Quesitos do Reclamante</h4>
          <div id="quesitos-reclamante-list" class="quesitos-list">
            </div>
          <button type="button" id="btn-add-quesito-reclamante" class="btn-secondary btn-add-quesito">Adicionar Pergunta</button>
        </div>

        <div class="quesitos-group">
          <h4>Quesitos da Reclamada</h4>
          <div id="quesitos-reclamada-list" class="quesitos-list">
            </div>
          <button type="button" id="btn-add-quesito-reclamada" class="btn-secondary btn-add-quesito">Adicionar Pergunta</button>
        </div>

      </fieldset>
    </div>

    <div id="tab-finalizacao" class="tab-content">
      <fieldset>
          <legend>Dados do Perito e Honorários</legend>
          <div class="form-grid">
              <div class="form-group">
                  <label for="perito">Perito:</label>
                  <input type="text" id="perito" name="perito" />
              </div>
              <div class="form-group">
                  <label for="crm">CRM:</label>
                  <input type="text" id="crm" name="crm" />
              </div>
              <div class="form-group">
                  <label for="valor_honorarios">Valor de Honorários (R$):</label>
                  <input type="text" id="valor_honorarios" name="valor_honorarios" placeholder="R$ 0,00" />
              </div>
               <div class="form-group">
                  <label for="valor_por_extenso">Valor por Extenso:</label>
                  <input type="text" id="valor_por_extenso" name="valor_por_extenso" />
              </div>
          </div>
      </fieldset>
       <fieldset>
        <legend>Datas</legend>
        <div class="form-grid">
          <div class="form-group">
            <label for="data_pericia">Data da Perícia:</label>
            <input type="date" id="data_pericia" name="data_pericia" />
          </div>
           <div class="form-group">
            <label for="hora_pericia">Hora da Perícia:</label>
            <input type="time" id="hora_pericia" name="hora_pericia" />
          </div>
           <div class="form-group">
            <label for="data_laudo">Data do Laudo:</label>
            <input type="date" id="data_laudo" name="data_laudo" />
          </div>
        </div>
      </fieldset>
    </div>

    <div class="form-actions">
      <button type="submit" class="btn-primary">Salvar</button>
      <button type="button" id="btn-cancel" class="btn-secondary">Cancelar</button>
    </div>
  </form>
</div>

      <!-- Tela de Carregamento -->
      <div id="loading-view" class="view-container" style="display: none;">
        <div class="loading-spinner"></div>
        <p>Carregando...</p>
      </div>
    </main>

    <footer class="app-footer">
      <p>Sistema de Laudos Médicos &copy; <span id="year"></span></p>
    </footer>
  </div>

  <script>
    // Atualiza o ano automaticamente
    document.getElementById('year').textContent = new Date().getFullYear();

    // Cancelar formulário
    document.addEventListener('DOMContentLoaded', () => {
      document.getElementById('btn-cancel').addEventListener('click', () => {
        // Chama função do renderer.js para voltar à lista
        if (typeof showListView === 'function') showListView();
      });
    });
  </script>
  <script src="js/masks.js"></script> <script src="js/renderer.js"></script>
  <script src="js/renderer.js"></script>
</body>
</html>
